# Πελατολόγιο CRM

Μια desktop εφαρμογή CRM (Customer Relationship Management) γραμμένη σε Java και JavaFX. Παρέχει μια ολοκληρωμένη λύση για τη διαχείριση πελατών, εργασιών, συνδρομών και τηλεφωνικών κλήσεων, με ενσωματωμένη τηλεφωνική λειτουργικότητα μέσω SIP.

---

## Πίνακας Περιεχομένων

- [Κύρια Χαρακτηριστικά](#κύρια-χαρακτηριστικά)
- [Τεχνολογίες](#τεχνολογίες)
- [Προαπαιτούμενα](#προαπαιτούμενα)
- [Εγκατάσταση & Ρύθμιση](#εγκατάσταση--ρύθμιση)
  - [1. Βάση Δεδομένων](#1-βάση-δεδομένων)
  - [2. Τηλεφωνικό Κέντρο (SIP)](#2-τηλεφωνικό-κέντρο-sip)
  - [3. Αρχείο Ρυθμίσεων](#3-αρχείο-ρυθμίσεων-appproperties)
- [Build & Εκτέλεση](#build--εκτέλεση)
- [Περιγραφή Λειτουργιών](#περιγραφή-λειτουργιών)
  - [Dashboard](#dashboard)
  - [Διαχείριση Πελατών](#διαχείριση-πελατών)
- [Μελλοντικές Βελτιώσεις](#μελλοντικές-βελτιώσεις)

---

## Κύρια Χαarakτηριστικά

- **Πλήρης Διαχείριση Πελατών:** Δημιουργία, επεξεργασία, διαγραφή και αναζήτηση πελατών.
- **Διαδραστικό Dashboard:** Συνολική εικόνα της επιχείρησης με γραφήματα για νέους πελάτες, πηγές συστάσεων, ανάλυση πελατών ανά ομάδα/υπο-ομάδα, και λίστες για εργασίες, συνδρομές που λήγουν και υπόλοιπα.
- **Ενσωματωμένη Τηλεφωνία (SIP):**
  - **Αναγνώριση Κλήσης:** Αναδυόμενο παράθυρο (popup) με τα στοιχεία του πελάτη κατά την εισερχόμενη κλήση.
  - **Click-to-Call:** Δυνατότητα έναρξης εξερχόμενης κλήσης με ένα κλικ.
- **Προχωρημένο Φιλτράρισμα:** Δυναμικά φίλτρα στην οθόνη πελατών για εύκολη εύρεση εγγραφών.
- **Διαχείριση Εργασιών & Συνδρομών:** Παρακολούθηση εργασιών και συνδρομών που πρόκειται να λήξουν.
- **Ενσωμάτωση με Εξωτερικές Υπηρεσίες:** Αυτοματοποιημένη συμπλήρωση φορμών σε ιστοσελίδες (Taxis, myPOS, Simply, κ.λπ.) μέσω Selenium.

---

## Τεχνολογίες

- **Γλώσσα:** Java 23
- **UI Framework:** JavaFX 17
- **Build Tool:** Apache Maven
- **Βάση Δεδομένων:** Microsoft SQL Server
- **Τηλεφωνία:** JAIN-SIP (για απευθείας επικοινωνία με SIP-based PBX όπως το Yeastar)
- **Βιβλιοθήκες UI:** JFoenix, ControlsFX, AtlantaFX
- **Reporting:** JasperReports
- **Web Automation:** Selenium

---

## Προαπαιτούμενα

Για να κάνετε build και να εκτελέσετε την εφαρμογή, θα χρειαστείτε:

1.  **Java Development Kit (JDK):** Έκδοση 17 ή νεότερη. Βεβαιωθείτε ότι η μεταβλητή περιβάλλοντος `JAVA_HOME` είναι σωστά ρυθμισμένη.
2.  **Apache Maven:** Για τη διαχείριση των εξαρτήσεων και το build του project.
3.  **Microsoft SQL Server:** Μια ενεργή εγκατάσταση της βάσης δεδομένων.
4.  **SIP-based PBX (π.χ., Yeastar):** Ένα τηλεφωνικό κέντρο που υποστηρίζει SIP εσωτερικά.

---

## Εγκατάσταση & Ρύθμιση

### 1. Βάση Δεδομένων

- Βεβαιωθείτε ότι η SQL Server instance σας είναι προσβάσιμη από τον υπολογιστή που θα τρέξει την εφαρμογή.
- Εκτελέστε τα απαραίτητα SQL scripts για να δημιουργήσετε τη βάση δεδομένων (`PelatologioDB`) και τους πίνακες.

### 2. Τηλεφωνικό Κέντρο (SIP)

- Στο περιβάλλον διαχείρισης του Yeastar PBX, δημιουργήστε ένα **νέο SIP εσωτερικό** που θα χρησιμοποιείται αποκλειστικά από την εφαρμογή.
- Σημειώστε τα παρακάτω στοιχεία:
  - **Αριθμός Εσωτερικού** (π.χ., `101`)
  - **Κωδικός Πρόσβασης** (SIP Password)
  - **IP Διεύθυνση (Domain)** του PBX

### 3. Αρχείο Ρυθμίσεων (`app.properties`)

Το αρχείο `app.properties` στον κεντρικό κατάλογο του project περιέχει όλες τις απαραίτητες ρυθμίσεις. Ενημερώστε το με τα δικά σας στοιχεία:

```properties
# Database Settings
server=YOUR_SQL_SERVER_IP\\INSTANCE_NAME
dbUser=your_db_user
dbPass=your_db_password

# SIP Settings (για την τηλεφωνία)
sipUser=101                     # Ο αριθμός του SIP εσωτερικού που δημιουργήσατε
sipPassword=your_sip_password   # Ο κωδικός του SIP εσωτερικού
sipDomain=192.168.1.10          # Η IP του Yeastar PBX
sipPort=5060                    # Η προεπιλεγμένη θύρα SIP (συνήθως 5060)
sipTransport=udp                # Το πρωτόκολλο μεταφοράς (συνήθως udp)
localIpAddress=192.168.1.100    # Η τοπική IP του υπολογιστή που τρέχει την εφαρμογή

# User Settings
appuser=YourUsername

# Paths
datafolder=C:\\Path\\To\\Your\\Data

# Credentials for Web Automation (Selenium)
taxisUser=your_taxis_user
taxisPass=your_taxis_pass
# ... και οι υπόλοιπες ρυθμίσεις για myPOS, Simply, κλπ.
```

---

## Build & Εκτέλεση

1.  **Build:** Ανοίξτε μια γραμμή εντολών στον κεντρικό κατάλογο του project (`C:\Users\User\Pelatologio`) και εκτελέστε:
    ```bash
    mvnw.cmd clean install
    ```
    Αυτό θα κατεβάσει τις εξαρτήσεις και θα δημιουργήσει το εκτελέσιμο αρχείο JAR.

2.  **Εκτέλεση:** Μετά το επιτυχές build, θα βρείτε το αρχείο JAR στον κατάλογο `target`. Εκτελέστε την εφαρμογή με την παρακάτω εντολή:
    ```bash
    java -jar target/Pelatologio-2-jar-with-dependencies.jar
    ```

**Troubleshooting:** Αν αντιμετωπίσετε το σφάλμα `JAVA_HOME not found`, βεβαιωθείτε ότι έχετε ορίσει σωστά τη μεταβλητή περιβάλλοντος και ότι χρησιμοποιείτε μια νέα γραμμή εντολών μετά την αλλαγή.

---

## Περιγραφή Λειτουργιών

### Dashboard

Το Dashboard παρέχει μια γρήγορη οπτική σύνοψη της κατάστασης της επιχείρησης. Περιλαμβάνει:
- **Πίνακες:** Εργασίες ημέρας, συνδρομές που λήγουν, και πελάτες με οικονομικά υπόλοιπα.
- **Γραφήματα:**
  - **Νέοι Πελάτες:** Ανάλυση νέων πελατών ανά μήνα.
  - **Πηγές Συστάσεων:** Ανάλυση από πού προέρχονται οι πελάτες.
  - **Ομάδες & Υπο-ομάδες:** Διαδραστικά γραφήματα πίτας που δείχνουν την κατανομή των πελατών. Κάνοντας κλικ σε μια κύρια ομάδα, το δεύτερο γράφημα ενημερώνεται για να δείξει την ανάλυση των υπο-ομάδων.
- **Λίστα Κλήσεων:** Εμφανίζει τις πιο πρόσφατες τηλεφωνικές κλήσεις.

### Διαχείριση Πελατών

Η κύρια οθόνη για τη διαχείριση των πελατών. Παρέχει:
- **Πίνακας Πελατών:** Εμφανίζει όλους τους πελάτες με βασικές πληροφορίες.
- **Απλή Αναζήτηση:** Ένα πεδίο για γρήγορη αναζήτηση σε όλα τα πεδία.
- **Προχωρημένα Φίλτρα:** Ένα πτυσσόμενο μενού με συνδυαστικά φίλτρα για:
  - Κατάσταση (Ενεργοί/Ανενεργοί)
  - Πηγή Σύστασης
  - Ομάδα & Υπο-ομάδα (με δυναμική φόρτωση)
  - Εφαρμογές (myPOS, Simply, κ.λπ.)

---

## Μελλοντικές Βελτιώσεις

- **Εισαγωγή Service Layer:** Για καλύτερο διαχωρισμό της business logic από τους controllers.
- **Dependency Injection:** Για πιο ευέλικτο και testable κώδικα.
- **Αντικατάσταση Selenium με APIs:** Έρευνα για επίσημα REST APIs από τις εξωτερικές υπηρεσίες για πιο αξιόπιστη διασύνδεση.
- **Caching:** Αποθήκευση στατικών δεδομένων (π.χ., λίστες ομάδων) κατά την εκκίνηση για βελτίωση της απόδοσης.
- **Κεντρικό Logging:** Χρήση SLF4J για την καταγραφή σφαλμάτων και συμβάντων σε αρχείο log.
- **UI/UX Βελτιώσεις:** Προσθήκη tooltips στα γραφήματα, κέντρο ειδοποιήσεων, και θέματα (light/dark mode).
